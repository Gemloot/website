import{p as e,a as t,o as n,c as a,b as s,t as i,r as o,u as r,W as l,J as u,d as p,e as d,f as c,g as y,w as m,F as v,h as f,i as b,j as g,k as w,l as T,m as k,n as h,L as M,C as I,q as x,s as _,v as A}from"./vendor.2c9aa31f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const O="0xc25ed8efAA71c30fc49A09da16fe8a103babCAEb";var C=[{inputs:[{internalType:"uint256",name:"_startTime",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_claimTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"startTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"x",type:"string"},{internalType:"string",name:"y",type:"string"},{internalType:"string",name:"gemSeed",type:"string"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getGemBlock",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"claim",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getLastClaimId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerClaim",outputs:[],stateMutability:"nonpayable",type:"function"}];e("data-v-549d0a18");const j=["src"];t();const N={props:{item:Object},setup(e){const{item:t}=e;return(e,o)=>(n(),a("div",null,[s("p",null,i(t.json.name),1),s("img",{src:t.json.image,class:"gem"},null,8,j)]))},__scopeId:"data-v-549d0a18"};e("data-v-2538b3b0");const S={class:"container"},z={class:"header"},F=s("div",{class:"logo"},[s("div",{class:"img"}),f(" Gemloot ")],-1),L={class:"wallet"},P=f(" Error Network "),q=f(" connect "),B={key:0,class:"loading"},E={class:"info"},G=s("div",{class:"details"},[s("p",null," Nasty monsters and devils ravaging, they non-stopped swarming from the dungeons and the situation has only become worse. "),s("p",null," Heroes, stand out and fight for our people, retake our lands. To start your adventure for salvation, you can claim this loot of gemstones with magic power from our ancient heroes legacy. "),s("p",null,"You may manufacture them into jewellery, trade them or set them on your equipment for enhancement. These precious gemstones are rare and valuable, so use them wisely. Adventurers, claim your loot and get ready for your journey.")],-1),D={key:0,class:"chest",src:"./assets/chest-c.24dbc224.svg"},H={key:1,class:"chest",src:"./assets/chest.113b4b82.svg"},J={key:0},R={class:"ts-count-down"},U={class:"ts-cc-number"},K=s("span",{class:"ts-cc-description"},"Days",-1),W={class:"ts-cc-number"},Y=s("span",{class:"ts-cc-description"},"Hours",-1),Q={class:"ts-cc-number"},V=s("span",{class:"ts-cc-description"},"Minutes",-1),X={class:"ts-cc-number"},Z=s("span",{class:"ts-cc-description"},"Seconds",-1),$={class:"block-claim"},ee=s("h3",null,null,-1),te=["src"],ne={key:1,class:"block-claim"},ae=f(" connect "),se={class:"footer"},ie={class:"actions"},oe={href:"https://twitter.com/GemLoot",target:"_blank"},re=s("p",null,"Gemloot is randomized gemstones generated and stored on chain for adventure",-1);t();const le={setup(e){const t=o(""),_=o(!1),A=o(!1),j=o({account:!1,gem:!1,claim:!1,counting:!1}),le=o(),ue=o([]),pe=o(0),de=r(),ce=window.web3?new l(window.web3.currentProvider):new u("https://mainnet.infura.io/v3/9aa3d95b3bc440fa88ea12eaa4456161"),ye=async()=>{const e=Date.now();j.value.counting=!0;const t=new I(O,C,ce),n=1e3*(await t.startTime()).toNumber(),a=n;pe.value=e<n?a-e:0,j.value.false=!0};p((()=>{const e=async()=>{await(async()=>{j.value.account=!0,j.value.gem=!0;try{const e=await ce.getSigner(),n=await e.getAddress();le.value=new I(O,C,e),t.value=n,j.value.account=!1,await ye(),A.value=(await le.value._claimTimes(n)).toNumber()>=1,j.value.gem=!1}catch(e){j.value.account=!1,j.value.gem=!1}})(),t.value&&await be()};if(window.web3){const n=window.web3.currentProvider;n.on("connect",(()=>{e()})),n.on("disconnect",(()=>{t.value="",A.value=!1,ue.value=[]})),n.on("accountsChanged",(()=>{e()})),n.on("networkChanged",(async t=>{fe(t),await e()}))}fe(),e()}));const me=async()=>{await ce.send("eth_requestAccounts",[])},ve=async()=>{await ce.getSigner(),j.value.claim=!0;try{const e=await le.value.claim();await e.wait();A.value=!0,j.value.claim=!1,de.success("Claim Success!"),await be()}catch(e){j.value.claim=!1,de.warning(e.message||e.toString())}},fe=async e=>{console.log(e);const t=e||(await ce.getNetwork()).chainId;console.log("chainId",t),1!=t?(_.value=!0,de.error("Please switch to mainnet")):_.value=!1},be=async()=>{j.value.gem=!0;const e=t.value,n=new I(O,C,ce),a=(await n.balanceOf(e)).toNumber(),s=await Promise.all(x.exports.range(a).map((async a=>{console.log(a,t);const s=(await n.tokenOfOwnerByIndex(e,a)).toNumber(),i=await n.tokenURI(s);return{id:s,json:JSON.parse(window.atob(i.replace("data:application/json;base64,","")))}})));ue.value=s,j.value.gem=!1},ge=()=>{pe.value=0},we=d((()=>(e=>e.substr(0,5)+"*******"+e.substr(-4))(t.value)));return(e,o)=>{const r=c("n-button"),l=c("n-spin"),u=c("n-icon");return n(),a("div",S,[s("div",z,[F,s("div",L,[_.value?(n(),y(r,{key:0,type:"error",size:"large"},{default:m((()=>[P])),_:1})):(n(),a(v,{key:1},[t.value?(n(),y(r,{key:1,ghost:"",color:"#fff",size:"large",loading:j.value.account},{default:m((()=>[f(i(b(we)),1)])),_:1},8,["loading"])):(n(),y(r,{key:0,ghost:"",size:"large",color:"#fff",onClick:me},{default:m((()=>[q])),_:1}))],64))])]),j.value.gem?(n(),a("div",B,[g(l,{stroke:"#fff"})])):(n(),a(v,{key:1},[s("div",E,[G,A.value?w("",!0):(n(),a("img",D)),A.value?(n(),a("img",H)):w("",!0)]),t.value?(n(),a("div",J,[pe.value?(n(),y(b(T),{key:0,time:pe.value,onEnd:ge},{default:m((({days:e,hours:t,minutes:n,seconds:a})=>[s("div",R,[s("div",null,[s("span",U,i(e),1),K]),s("div",null,[s("span",W,i(t),1),Y]),s("div",null,[s("span",Q,i(n),1),V]),s("div",null,[s("span",X,i(a),1),Z])])])),_:1},8,["time"])):w("",!0),s("div",$,[g(r,{class:"btn-claim",size:"large",color:"#9b8e3c",onClick:ve,loading:j.value.claim,disabled:A.value||!!pe.value},{default:m((()=>[f(i(A.value?"Claimed":"Claim"),1)])),_:1},8,["loading","disabled"])]),ee,s("div",{class:h(["block-gems",{"block-gems-multi":ue.value.length>=2}])},[(n(!0),a(v,null,k(ue.value,(e=>(n(),y(N,{item:e,key:"item.id",class:"item-gem"},{default:m((()=>[s("img",{src:e.json.image,class:"gem"},null,8,te),s("p",null,i(e.json.name),1)])),_:2},1032,["item"])))),128))],2)])):(n(),a("div",ne,[g(r,{class:"btn-claim",size:"large",color:"#9b8e3c",onClick:me},{default:m((()=>[ae])),_:1})]))],64)),s("div",se,[s("div",ie,[s("a",oe,[g(u,{size:"20"},{default:m((()=>[g(b(M))])),_:1})])]),re])])}},__scopeId:"data-v-2538b3b0"};const ue=_({setup:e=>(e,t)=>{const a=c("n-message-provider");return n(),y(a,null,{default:m((()=>[g(le)])),_:1})}});ue.use(A),ue.mount("#app");
